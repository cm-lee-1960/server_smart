{% extends "analysis/base.html" %}
{% load static %}
{% block extra-style %}
<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="{% static "css/nav.css" %}">
<!-- 제이쿼리 -->
<script defer src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<!-- 부트스트랩 -->
<link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/sticky-footer-navbar.css">
<link rel="stylesheet" href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<!-- CSS호출 -->
<script type="text/javascript" defer src="{% static "js/search.js" %}"></script>
<!-- pdf 출력 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
<!-- CSS,JS 호출 -->
<link rel="stylesheet" type="text/css" href="{% static "css/A4.css" %}">
<script type="text/javascript" defer src="{% static "js/reportdata.js" %}"></script>
<!-- CSS호출 -->
<link rel="stylesheet" type="text/css" href="{% static "css/report.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/modal.css" %}">
<!-- 아이콘 -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<style>
    #btnzone{
        border-radius:0px 0px 10px 10px;
        right:100px; 
        border: 1px solid rgba(183, 180, 180, 0.839); 
        background-color: white; 
        width:280px; 
        text-align:center; 
        position:fixed; 
        margin-top:-15px; 
        padding:5px; 
        z-index:10; 
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    } 
    button{
	    display:inline;
	    margin-left:10px;
}
</style>
    <!-- 스타일 -->
<style>
    p{
        font-size: 15px;
        display: inline;
        text-align:center;
    }
    input{
        font-size: 15px;
        display: inline;
        text-align: center;
            
    }
    td{
        text-align:center;
        height:40px;
    }
</style>
    

{% endblock %}

{% block contents %}
<body>
 <!-- 측정대상등록 모달 -->
<div class="modal fade" id="regi_measplan" tabindex="-1" role="dialog" aria-labelledby="regi_measplanLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="regi_measplanLabel" style="font-weight: bold;">측정대상등록</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="{% url 'analysis:create_measplan' %}" method="POST" id="modalregister">{% csrf_token %}
            <div class="row"  style="border-bottom: 1px solid rgb(228, 223, 223); padding-bottom: 10px;">
                <div class="col-md-2" style="text-align:center">
                    <label for="PlanYear" class="col-form-label">대상년도</label>
                    <input type="text" class="form-control" id="planYear" name="planYear">
                </div>
            </div></br>
            <div class="row"  style="border-bottom: 1px solid rgb(228, 223, 223); padding-bottom: 10px;">
                <label style="font-weight: bold;">5G</label><br/>
                <div class="col-md-2" style="text-align:center">
                    <label for="area1" class="col-form-label"></br>행정동</br></label>
                    <input type="text" class="form-control" id="area1" name="hjd5G">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area2" class="col-form-label">다중이용시설/</br>교통인프라</label>
                    <input type="text" class="form-control" id="area2" name="dg5G">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area3" class="col-form-label"></br>커버리지</br></label>
                    <input type="text" class="form-control" id="area3" name="cv5G">
                </div>
            </div></br>
            <div class="row"  style="border-bottom: 1px solid rgb(228, 223, 223); padding-bottom: 10px;">
                <label style="font-weight: bold;">LTE</label><br/>
                <div class="col-md-2" style="text-align:center">
                    <label for="area4" class="col-form-label"></br>행정동(대도시)</br></label>
                    <input type="text" class="form-control" id="area4" name="bctLTE">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area5" class="col-form-label"></br>행정동(중소도시)</br></label>
                    <input type="text" class="form-control" id="area5" name="mctLTE">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area6" class="col-form-label"></br>행정동(농어촌)</br></label>
                    <input type="text" class="form-control" id="area6" name="sctLTE">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area7" class="col-form-label">다중이용시설/</br>교통인프라(인빌딩)</label>
                    <input type="text" class="form-control" id="area7" name="ibLTE">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area8" class="col-form-label">다중이용시설/</br>교통인프라(테마)</label>
                    <input type="text" class="form-control" id="area8" name="tmLTE">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area9" class="col-form-label"></br>커버리지</label>
                    <input type="text" class="form-control" id="area9" name="cvLTE">
                </div>
            </div></br>
            <div class="row"  style="border-bottom: 1px solid rgb(228, 223, 223); padding-bottom: 10px;">
                <label style="font-weight: bold;">WiFi</label><br/>
                <div class="col-md-2" style="text-align:center">
                    <label for="area10" class="col-form-label"></br>상용</label>
                    <input type="text" class="form-control" id="area10" name="syWiFi">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area11" class="col-form-label"></br>개방</label>
                    <input type="text" class="form-control" id="area11" name="gbWiFi">
                </div>
            </div></br>
            <div class="row" style="border-bottom: 1px solid rgb(228, 223, 223); padding-bottom: 10px;">
                <label style="font-weight: bold;">품질취약지역</label><br/>
                <div class="col-md-2" style="text-align:center">
                    <label for="area12" class="col-form-label"></br>등산로</br></label>
                    <input type="text" class="form-control" id="area12" name="dsrWeak">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area13" class="col-form-label"></br>여객항로</label>
                    <input type="text" class="form-control" id="area13" name="yghrWeak">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area14" class="col-form-label"></br>유인도서</label>
                    <input type="text" class="form-control" id="area14" name="yidsWeak">
                </div>
                <div class="col-md-2" style="text-align:center">
                    <label for="area15" class="col-form-label"></br>해안도로</label>
                    <input type="text" class="form-control" id="area15" name="hadrWeak">
                </div>
            </div>
        </form>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary" form="modalregister">등록대상생성</button>
        <form action="{% url 'analysis:delete_measplan' %}" method="POST">{% csrf_token %}
            <button type="submit" class="btn btn-primary" formaction="{% url 'analysis:delete_measplan' %}">데이터초기화</button>
        </form>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
        </div>
      </div>
    </div>
</div>    
   
<!-- 메인화면 -->
    <div style="display:flex; flex-flow: row nowrap;">
        <!-- 사이드바 -->
	<div style="width:200px; border-right:1px solid rgb(226, 221, 221); margin-top:5px">
		<aside style="position:fixed;width:200px;">
			<nav>
				<div style="margin:40px 10px 10px 10px"> 
					<a href="http://127.0.0.1:8000/analysis/report/" style="text-decoration-line:none; text-decoration:none;color:grey;">일일보고 </a>
				</div>
				<div style="margin:10px" >
					<a href="http://127.0.0.1:8000/analysis/report/list/" style="text-decoration-line:none; text-decoration:none;color:grey">일일보고 리스트 </a>
				</div>
				<div style="margin:10px" >
				  <a href="http://127.0.0.1:8000/analysis/report/measplan/" style="text-decoration-line:none; text-decoration:none;color:grey">측정대상등록 </a>
				</div>
				<div style="margin:10px" >
					<a href="http://127.0.0.1:8000/analysis/report/measresult/" style="text-decoration-line:none; text-decoration:none;color:grey">측정완료현황</a>
				</div>  
			</nav>
		</aside>
	</div>
    

        <div id="show" style="width:90%">
            <div id = 'btnzone'> 
		        
                <button type="button" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#regi_measplan">추가 <i class="icon-fixed-width icon-plus" aria-hidden="true"></i></button>
                <button class="btn btn-secondary btn-sm" id="modify" >수정 <i class="icon-fixed-width icon-pencil"></i></button>
                <button type="submit" class="btn btn-secondary btn-sm" id="complete" form="planmodify" >완료 <i class="icon-fixed-width icon-check"></i></button>
                
            </div>
       
            <div style="border: 1px solid rgb(226, 221, 221); margin:60px 40px; padding:10px; width:95%">
            <form method="get" action="" class="form" id="planyearsearch">
                <select class="form-select form-select-sm mb-2" aria-label=".form-select-sm select example" style="width:130px;" name="planYear" id="id_yy">
                <option disabled id = measyear>측정년도</option>
                <option value="2019">2019년</option>
                <option value="2020"> 2020년</option>
                <option value="2021"> 2021년</option>
                <option value="2022"> 2022년</option>
                <option value="2023"> 2023년</option>
           
                </select>
            </form>
        
     
            <h5>
            5G 등록대상
            </h5>
            <form action="{% url 'analysis:create_measplan' %}" method="POST" style="display:inline;" id="planmodify">{% csrf_token %}
            <div id="output" style="text-align: center;">
                <input type = 'hidden' id="yearyear" name="planYear"></input>
                <table id="5Ghh" class="table table-hover table-bordered">
                    <thead class="bg-light">
                        <tr>
                            <th style="width:20%;">구분</th>
                            <th style="width:20%;">계</th>
                            <th style="width:20%;">행정동</th>
                            <th style="width:20%;">다중이용시설/<br>교통인프라</th>
                            <th style="width:20%;">커버리지</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td >대상</td>
                            {% for yy_list in yy_list %}
                            <td><p>{{yy_list.total5G}}</p></td>
                            <td><p>{{yy_list.hjd5G}} </p><input style="display:inline; width:100px;height:20px;" class="form-control" type="text" name="hjd5G" id="textmod2" value="{{yy_list.hjd5G}}"></input></td>
                            <td><p>{{yy_list.dg5G}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="dg5G" id="textmod3" value="{{yy_list.dg5G}}"></input></td>
                            <td><p>{{yy_list.cv5G}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="cv5G" id="textmod4" value="{{yy_list.cv5G}}"></input></td>
                            {% endfor %}
                        </tr>
                    </tbody>
                </table>
            </div>
            <h5>
            LTE 등록대상
            </h5>
            <div id="output" style="text-align: center;">
                <table id="ltehh" class="table table-hover table-bordered ">
                    <thead class="bg-light">
                        <tr>
                            <th rowspan = "2" style="width:13%;">구분</th>
                            <th rowspan = "2" style="width:13%;">계</th>
                            <th colspan = "3">행정동</th>
                            <th colspan = "2">다중이용시설/<br>교통인프라</th>
                            <th rowspan = "2">커버리지</th>
                        </tr>
                        <tr>
                            <th style="width:13%;">대도시</th>
                            <th style="width:13%;">중소도시</th>
                            <th style="width:13%;">농어촌</th>
                            <th style="width:13%;">인빌딩</th>
                            <th style="width:13%;">테마</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td >대상</td>
                            {% for yy_list in yy_list %}
                            <td><p>{{yy_list.totalLTE}}</p></td>
                            <td><p>{{yy_list.bctLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="bctLTE" id="textmod6" value="{{yy_list.bctLTE}}"></input></td>
                            <td><p>{{yy_list.mctLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="mctLTE" id="textmod7" value="{{yy_list.mctLTE}}"></input></td>
                            <td><p>{{yy_list.sctLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="sctLTE" id="textmod8" value="{{yy_list.sctLTE}}"></input></td>
                            <td><p>{{yy_list.ibLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="ibLTE" id="textmod9" value="{{yy_list.ibLTE}}"></input></td>
                            <td><p>{{yy_list.tmLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="tmLTE" id="textmod10" value="{{yy_list.tmLTE}}"></input></td>
                            <td><p>{{yy_list.cvLTE}} </p><input style="display:inline; width:90px;height:20px" class="form-control" type="text" name="cvLTE" id="textmod11" value="{{yy_list.cvLTE}}"></input></td>
                            {% endfor %}
                        </tr>
                    </tbody>
                </table>
            </div>
            <h5>
            WiFi 등록대상
            </h5>
            <div id="output" style="text-align: center;">
                <table id="wifihh" class="table table-hover table-bordered ">
                    <thead class="bg-light">
                        <tr>
                            <th style="width:25%;">구분</th>
                            <th style="width:25%;">계</th>
                            <th style="width:25%;">상용</th>
                            <th style="width:25%;">개방</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>대상</td>
                            {% for yy_list in yy_list %}
                            <td><p>{{yy_list.totalWiFi}}</p></td>
                            <td><p>{{yy_list.syWiFi}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="syWiFi" id="textmod13" value="{{yy_list.syWiFi}}"></input></td>
                            <td><p>{{yy_list.gbWiFi}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="gbWiFi" id="textmod14" value="{{yy_list.gbWiFi}}"></input></td>
                            {% endfor %}
                        </tr>
                    </tbody>
                </table>
            </div>
            <h5>
            품질취약지역 등록대상
            </h5>
            <div id="output" style="text-align: center;">
            <table id="pjhh" class="table table-hover table-bordered ">
                <thead class="bg-light">
                    <tr>
                        <th style="width:15%;">구분</th>
                        <th style="width:15%;">계</th>
                        <th style="width:15%;">등산로</th>
                        <th style="width:15%;">여객항로</th>
                        <th style="width:15%;">유인도서</th>
                        <th style="width:15%;">해안도로</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td >대상</td>
                        {% for yy_list in yy_list %}
                        <td><p >{{yy_list.totalWeakArea}}</p></td>
                        <td><p>{{yy_list.dsrWeak}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="dsrWeak" id="textmod16" value="{{yy_list.dsrWeak}}"></input></td>
                        <td><p>{{yy_list.yghrWeak}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="yghrWeak" id="textmod17" value="{{yy_list.yghrWeak}}"></input></td>
                        <td><p>{{yy_list.yidsWeak}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="yidsWeak" id="textmod18" value="{{yy_list.yidsWeak}}"></input></td>
                        <td><p>{{yy_list.hadrWeak}} </p><input style="display:inline; width:100px;height:20px" class="form-control" type="text" name="hadrWeak" id="textmod19" value="{{yy_list.hadrWeak}}"></input></td>
                        {% endfor %}
                    </tr>
                </tbody>
            </table>
            </div>
        </form>
        </div>
    </div>
    

</body>


{% endblock %}
{% block extra-script %}
<!-- 자바스크립트 호출 -->
<script defer src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>        
<script type="text/javascript" defer src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/popper.min.js"></script>
<script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
<script>
    //선택년도 데이터 추출
    $(document).ready(function() {
        $("#planyearsearch").val("2022").prop("selected",true);
        
   
});
</script>

<script>
    //선택년도 데이터 추출
    $(document).ready(function() {
        $('#SELECTS').val('measyear').prop('selected',true);
        $("select[name=planYear]" ).val("{{yy_text}}");
        $('select[name=planYear]').change(function () {
        console.log($('select[name=planYear]').val());
        year = $('select[name=planYear]').val();
        $('.form').submit();
        
    });
});
</script>

<script>
    //선택된 년도 입력
$(document).ready(function() {
    var s = document.getElementById("id_yy");
    var ss = s.options[s.selectedIndex].value;
    document.getElementById("yearyear").value = ss;
    });

</script>
<script>
// 수정 완료 이벤트
$(document).ready(function() {
	var arr = ['#textmod1','#textmod2','#textmod3','#textmod4','#textmod5','#textmod6','#textmod7','#textmod8','#textmod9','#textmod10','#textmod11','#textmod12','#textmod13',
    '#textmod14','#textmod15','#textmod16','#textmod17','#textmod18','#textmod19'];
    
    for (var i = 0; i<arr.length; i++){
        $(arr[i]).hide();
    }

        $('#modify').click(function() {
            for (var i = 0; i<arr.length; i++){
            $(arr[i]).toggle();
            $('p').toggle();
        }
    });
        
        $('#complete').click(function() {
            for (var i = 0; i<arr.length; i++){
            $(arr[i]).hide();
            $('p').toggle();
        }
    });
});
</script>
{% endblock %}