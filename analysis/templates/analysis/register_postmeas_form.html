{% extends "analysis/base.html" %}
{% load static %}
{% block extra-style %}

<!-- 부트스트랩 -->
<link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/sticky-footer-navbar.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<!-- CSS,JS 호출 -->
<link rel="stylesheet" type="text/css" href="{% static "css/A4.css" %}">
<!-- CSS호출 -->
<link rel="stylesheet" type="text/css" href="{% static "css/report.css" %}">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<!-- 테스트 -->


<style>
    #btnzone{
        border-radius:0px 0px 10px 10px;
        right:100px; 
        border: 1px solid rgba(183, 180, 180, 0.839); 
        background-color: white; 
        width:350px; 
        text-align:center; 
        position:fixed; 
        margin-top:-15px; 
        padding:5px; 
        z-index:10; 
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    } 
    button{
        display:inline;
        margin:2px 5px;
    }
    </style>

<!-- 테스트사이드바 -->
<style>

	.wrapper {
		display: flex;
		align-items: stretch;
        position:fixed;
	}
	
	#sidebar {
		min-width: 250px;
		max-width: 250px;
		min-height: 100vh;
	}
	
	#sidebar.active {
		margin-left: -250px;
	}
	a[data-toggle="collapse"] {
		position: relative;
	}
	
	.dropdown-toggle::after {
		display: block;
		position: absolute;
		top: 50%;
		right: 20px;
		transform: translateY(-50%);
	}
	@media (max-width: 768px) {
		#sidebar {
			margin-left: -250px;
		}
		#sidebar.active {
			margin-left: 0;
		}
	}
	@import "https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700";
	
	
	body {
		font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
		background: #fafafa;
	}
	
	/* p {
		font-family: 'Poppins', sans-serif;
		font-size: 1.1em;
		font-weight: 300;
		line-height: 1.7em;
		color: #999;
	} */
	
	a, a:hover, a:focus {
		color: inherit;
		text-decoration: none;
		transition: all 0.3s;
	}
	
	#sidebar {
		/* don't forget to add all the previously mentioned styles here too */
		background: rgb(164, 164, 164);
		color: #fff;
		transition: all 0.3s;
	}
	
	#sidebar .sidebar-header {
		padding: 20px;
		background: #343a40;
	}
	
	#sidebar ul.components {
		padding: 20px 0;
		/* border-bottom: 1px solid #47748b; */
	}
	
	#sidebar ul p {
		color: #fff;
		padding: 10px;
	}
	
	#sidebar ul li a {
		padding: 10px;
		font-size: 1.1em;
		display: block;
	}
	#sidebar ul li a:hover {
		color: #8d8e93;
		background: #fff;
	}
	
	#sidebar ul li.active > a, a[aria-expanded="true"] {
		color: #fff;
		background: rgb(164, 164, 164);
	}
	ul ul a {
		font-size: 0.9em !important;
		padding-left: 30px !important;
		background: grey;
	}
    .bg-dark{
	background-color: #343a40 !important;
}
	</style>
{% endblock %}
{% block contents %}
<body>
        <!-- modal content5g -->
<div id="modal-excel5g" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="far fa-save mr-1"></i>
                    5G 사후측정 업로드
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form class="modal-form" id="modal-excel-form" method='post'>
                    <div class="row justify-content-center toolbar-forms py-2">
                        <div class="col-8">
                                <div class="custom-file text-left">
                                    <input id="input-excel5g"  type="file">
                                    <label for="input-excel5g" ></label>
                                </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer justify-content-center">
                <div class="float-left mx-auto">
                    <button type="submit" class="btn btn-secondary" id="excel-upload5g">저장</button>
                    <button type="button" class="btn btn-default border" data-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>
</div><!-- modal end -->

<div id="modal-excellte" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="far fa-save mr-1"></i>
                    LTE 사후측정 업로드
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form class="modal-form" id="modal-excel-form" method='post'>
                    <div class="row justify-content-center toolbar-forms py-2">
                        <div class="col-8">
                            <div class="custom-file text-left">
                                <input id="input-excellte" type="file" >
                                <label for="input-excellte"></label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer justify-content-center">
                <div class="float-left mx-auto">
                    <button type="submit" class="btn btn-secondary" id="excel-uploadlte">저장</button>
                    <button type="button" class="btn btn-default border" data-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>
</div><!-- modal end -->
    <!-- 메인화면 -->
<div  style="display:flex; flex-flow: row nowrap;">
    <!-- 테스트 사이드바 -->


<div class="wrapper">
    
	<!-- Sidebar -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <h2>일일보고</h2>
        </div>

        <ul class="list-unstyled components">
            <li>
                <a href="http://127.0.0.1:8000/smart/analysis/report/">일일보고</a>
            </li>
			<li>
                <a href="http://127.0.0.1:8000/smart/analysis/report/list/">일일보고 목록</a>
            </li>
			<li class="active">
                <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">일일보고 관리</a>
                <ul class="collapse list-unstyled" id="homeSubmenu">
                    <li>
                        <a href="http://127.0.0.1:8000/smart/analysis/report/measplan/">측정대상등록</a>
                    </li>
                    <li>
                        <a href="http://127.0.0.1:8000/smart/analysis/report/measresult/">측정완료현황</a>
                    </li>
                    <li>
                        <a href="http://127.0.0.1:8000/smart/analysis/report/postmeas/">사후측정등록</a>
                    </li>
                </ul>
            </li>
        
        </ul>
    </nav>
	<div id="content" style="height:10px; width:10px;">

		<nav class="navbar navbar-expand-lg">
			<div class="container-fluid">
	
				<button type="button" id="sidebarCollapse" class="btn btn-primary">
					<i class="fas fa-align-left"></i>
					<span></span>
				</button>
			</div>
		</nav>
	</div>
</div>


<div id="blank" style="width:250px;"></div>

<div id="show1" style=" width:90%;">
    <div id = 'btnzone'> 
			
			
        <button class="btn btn-secondary btn-sm" style="display:inline; margin-left:5px;" id="postmeas5gupload" >5G 사후측정 <i class="icon-fixed-width icon-upload-alt"></i></button>
        <button class="btn btn-secondary btn-sm" style="display:inline; margin-left:5px;" id="postmeaslteupload">LTE 사후측정 <i class="icon-fixed-width icon-upload-alt"></i></button>
       
    </div>
    <div id="output" div style="border: 1px solid rgb(226, 221, 221); margin:60px 40px; padding:10px; width:95%">
        <div id="measresultpost5G">
            <div>
                <!-- <input type="checkbox" name="meastitle" id="meas24" value="measresultpost5G" checked/> 사후측정5G -->
                <h3>&nbsp;&nbsp;※ 5G 사후 측정</h3>
               
            </div>
            <br><div id="output1">
                <form action="{% url 'analysis:create_postmeasure5G' %}" method="POST" style="display:inline;" id="postmeas5G">{% csrf_token %}
                    <table id="5Gsh" style="border: solid 1px black;" >
				        <thead>
                            <tr >
                                <th>측정일자</th>
                                <th>지역</th>
                                <th>측정국소</th>
                                <th>KT_DL(본)</th>
                                <th>KT_UL(본)</th>
                                <th>KT_RSRP(본)</th>
                                <th>KT_LTE대역(본)</th>
                                <th>KT_DL(사후)</th>
                                <th>KT_UL(사후)</th>
                                <th>KT_RSRP(사후)</th>
                                <th>KT_LTE대역(사후)</th>
                                <th>SKT_DL(사후)</th>
                                <th>SKT_UL(사후)</th>
                                <th>SKT_RSRP(사후)</th>
                                <th>SKT_LTE대역(사후)</th>
                                <th>LG_DL(사후)</th>
                                <th>LG_UL(사후)</th>
                                <th>LG_RSRP(사후)</th>
                                <th>LG_LTE대역(사후)</th>
                            </tr>	
                        </thead>
                        <tbody id="graph">
                        {% for postmeasure5g in postmeasure5g %}
                            <tr>
                                <td>{{postmeasure5g.measdate}}</td>
                                <td>{{postmeasure5g.district}}</td>
                                <td>{{postmeasure5g.name}}</td>
                                <td>{{postmeasure5g.measkt_dl}}</td>
                                <td>{{postmeasure5g.measkt_ul}}</td>
                                <td>{{postmeasure5g.measkt_rsrp}}</td>
                                <td>{{postmeasure5g.measkt_lte}}</td>
                                <td>{{postmeasure5g.postmeaskt_dl}}</td>
                                <td>{{postmeasure5g.postmeaskt_ul}}</td>
                                <td>{{postmeasure5g.postmeaskt_rsrp}}</td>
                                <td>{{postmeasure5g.postmeaskt_lte}}</td>
                                <td>{{postmeasure5g.postmeasskt_dl}}</td>
                                <td>{{postmeasure5g.postmeasskt_ul}}</td>
                                <td>{{postmeasure5g.postmeasskt_rsrp}}</td>
                                <td>{{postmeasure5g.postmeasskt_lte}}</td>
                                <td>{{postmeasure5g.postmeaslg_dl}}</td>
                                <td>{{postmeasure5g.postmeaslg_ul}}</td>
                                <td>{{postmeasure5g.postmeaslg_rsrp}}</td>
                                <td>{{postmeasure5g.postmeaslg_lte}}</td>
                            </tr>
                        {% endfor %}
                    
                        
                        </tbody>
                    </table>
            </form>
            </div>
        <br>
        <div id="measresultpostLTE">
	<div>
		<!-- <input type="checkbox" name="meastitle" id="meas25" value="measresultpostLTE" checked/> 사후측정LTE -->
		<h3>&nbsp;&nbsp;※ LTE 사후 측정</h3>
		
	</div>
  
	<br><div id="output1">
		<table id="5Gsh" style="border: solid 1px black;" >
				
            <thead>
                <tr >
                    <th>측정일자</th>
                    <th>지역</th>
                    <th>측정국소</th>
                    <th>KT_DL(본)</th>
                    <th>KT_UL(본)</th>
                    <th>KT_RSRP(본)</th>
                    <th>KT_SINR(본)</th>
                    <th>KT_DL(사후)</th>
                    <th>KT_UL(사후)</th>
                    <th>KT_RSRP(사후)</th>
                    <th>KT_SINR(사후)</th>
                    <th>SKT_DL(사후)</th>
                    <th>SKT_UL(사후)</th>
                    <th>SKT_RSRP(사후)</th>
                    <th>SKT_SINR(사후)</th>
                    <th>LG_DL(사후)</th>
                    <th>LG_UL(사후)</th>
                    <th>LG_RSRP(사후)</th>
                    <th>LG_SINR(사후)</th>
                </tr>	
            </thead>
			<tbody id="graph">
			{% for postmeasurelte in postmeasurelte %}
				<tr>
                    <td>{{postmeasurelte.measdate}}</td>
					<td>{{postmeasurelte.district}}</td>
					<td>{{postmeasurelte.name}}</td>
                    <td>{{postmeasurelte.measkt_dl}}</td>
                    <td>{{postmeasurelte.measkt_ul}}</td>
                    <td>{{postmeasurelte.measkt_rsrp}}</td>
                    <td>{{postmeasurelte.measkt_sinr}}</td>
                    <td>{{postmeasurelte.postmeaskt_dl}}</td>
                    <td>{{postmeasurelte.postmeaskt_ul}}</td>
                    <td>{{postmeasurelte.postmeaskt_rsrp}}</td>
                    <td>{{postmeasurelte.postmeaskt_sinr}}</td>
                    <td>{{postmeasurelte.postmeasskt_dl}}</td>
                    <td>{{postmeasurelte.postmeasskt_ul}}</td>
                    <td>{{postmeasurelte.postmeasskt_rsrp}}</td>
                    <td>{{postmeasurelte.postmeasskt_sinr}}</td>
                    <td>{{postmeasurelte.postmeaslg_dl}}</td>
                    <td>{{postmeasurelte.postmeaslg_ul}}</td>
                    <td>{{postmeasurelte.postmeaslg_rsrp}}</td>
                    <td>{{postmeasurelte.postmeaslg_sinr}}</td>
				</tr>
			{% endfor %}
        
			
			</tbody>
		</table>
	</div>
</div>
</div>




</body>
{% endblock %}
{% block extra-script %}
<!-- 자바스크립트 호출 -->

{% csrf_token %}
<script src="https://unpkg.com/vue@2.4.2"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

<!-- 테스트 사이드바 -->
<script>
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
            $(this).toggleClass('active');
        });
    });
    $('#report_nav').addClass('nav-item active');
	$('#dashboard_nav').removeClass('nav-item active');
	$('#dashboard_nav').addClass('nav-item');
    </script>

<!-- 엑셀 업로드 -->
<script type="text/javascript">
    $("#postmeas5gupload").click(function () {
            $("#modal-excel5g").modal('show');
        });
    $("#postmeaslteupload").click(function () {
            $("#modal-excellte").modal('show');
        });
</script>
<script type="text/javascript">
    
        $('#excel-upload5g').click(() => {
            var form = $("#modal-excel-form")[0];
            var formData = new FormData(form);
            formData.append("message", "ajax로 파일 전송하기");
            formData.append("file", $("#input-excel5g")[0].files[0]);
            $.ajaxSetup({
                headers: { "X-CSRFToken": '{{csrf_token}}'}
            });
            $.ajax({
                url: "{% url 'analysis:excel-upload5g' %}",
                processData: false,
                contentType: false,
                type: "POST",
  
                data : formData,
                success: function(data) {
                    alert(data.message);
                    location.reload();
                },
                error: function(data) {
                    alert(data.message);
                },
            });
        });

        
        $('#excel-uploadlte').click(() => {
            var form = $("#modal-excel-form")[0];
            var formData = new FormData(form);
            formData.append("message", "ajax로 파일 전송하기");
            formData.append("file", $("#input-excellte")[0].files[0]);
            $.ajaxSetup({
                headers: { "X-CSRFToken": '{{csrf_token}}'}
            });
            $.ajax({
                url: "{% url 'analysis:excel-uploadlte' %}",
                processData: false,
                contentType: false,
                type: "POST",
  
                data : formData,
                success: function(data) {
                    alert(data.message);
                    location.reload();
                },
                error: function(data) {
                    alert(data.message);
                },
            });
        });
</script>

<script>

    $(document).ready(function() {
       
        $(".postmeas5g").hide();
        // for (let i = 0; i<textmod.length; i++){
        //         $(textmod[i]).hide();
        //     }
        
        // $('#msgmodify').click(function() {
        //     for(let i = 0; i<textmod.length; i++){
        //         $(textmod[i]).toggle();
        //     };
        //     for(let i = 0; i<result.length; i++){
        //         $(result[i]).toggle();
        //     };
        //     let text1 = $("#textmod1").val();
        //     $("#textmod1copy").val(text1);
        //     let text2 = $("#textmod2").val();
        //     $("#textmod2copy").val(text2);
        //     let text3 = $("#textmod3").val();
        //     $("#textmod3copy").val(text3);
        //     let text4 = $("#textmod4").val();
        //     $("#textmod4copy").val(text4);
        //     let text5 = $("#textmod5").val();
        //     $("#textmod5copy").val(text5);
        //     let text6 = $("#textmod6").val();
        //     $("#textmod6copy").val(text6);
        //     $("#msgcomplete").toggle();
        //     $("#postmeasmodify").toggle();
        // });
        // $('#postmeasmodify').click(function() {
        //     // $(".postmeas5g").toggle();
        //     $("#postmeascomplete").toggle();
        //     $("#msgmodify").toggle();
        //     // $(".postmeasresult").toggle();
        // });
        
    });
    </script>

{% endblock %}